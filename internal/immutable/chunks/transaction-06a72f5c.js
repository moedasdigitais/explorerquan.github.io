import{w as f}from"./index-08e0cf00.js";const a={status:"",hash:0,amount_out:0,mixin:"",inputs:[],fee:"",outputs:[],size:0,block:0,timestamp:0,genesis:!1,fromSearch:!1},u=(n,e)=>{if(n===0)return"0 Bytes";const i=1024,s=e||2,t=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.floor(Math.log(n)/Math.log(i));return parseFloat((n/Math.pow(i,o)).toFixed(s))+" "+t[o]},h=n=>{let e=[];for(let i=n.length-1;i>=0;i--){const s=n[i];if(s){const t=Object.assign({});s.amount&&(t.amount=(parseInt(s.amount)/1e8).toFixed(8)),s.target&&s.target.data&&s.target.data.key&&(t.key=s.target.data.key),t.key&&t.amount&&e.push(t)}if(i===0)return e}},c=n=>{let e=[];for(let i=n.length-1;i>=0;i--){const s=n[i];if(s){const t=Object.assign({});s.value&&(s.value.amount&&(t.amount=(parseInt(s.value.amount)/1e8).toFixed(8)),s.value.k_image&&(t.key=s.value.k_image),s.value.key_offsets&&(t.signatures=s.value.key_offsets.length)),t.key&&t.amount&&e.push(t)}if(i===0)return e}},{subscribe:p,update:g}=f(a),l=n=>{if(n)g(e=>{const{txDetails:i,tx:s,block:t,lastBlock:o}=n;if(i&&i.hash&&typeof t=="object"&&"height"in t){if(t.hash&&t.hash.toString().length>0){const r=Number(o)-Number(t.height);r>0&&(r>=2?e.status="ok":e.status=r+" de 2"),e.block=t.height,e.timestamp=t.timestamp}else e.status="unconfirmed",e.block="unconfirmed",e.timestamp="unconfirmed";const m=Number(i.fee);e.hash=i.hash,i.hash.toString()==="4aea3303940cac5f307d67d15199a014d99626075b30a348bbb77174ba7b22d8"?e.genesis=!0:e.genesis=!1,e.amount_out=(parseInt(i.amount_out)/1e8).toFixed(8),Number(i.mixin)>0?e.mixin=i.mixin:e.mixin="not_have",s.vin&&(e.inputs=c(s.vin),s.vin[0].type!=="ff"&&m>0?e.fee=(m/1e8).toFixed(8):e.fee="not_have"),s.vout&&(e.outputs=h(s.vout)),e.size=u(i.size)}return n.fromSearch?n.fromSearch&&(e.fromSearch=!0):e.fromSearch=!1,e});else return a},b={subscribe:p,setData:l};export{b as t};
